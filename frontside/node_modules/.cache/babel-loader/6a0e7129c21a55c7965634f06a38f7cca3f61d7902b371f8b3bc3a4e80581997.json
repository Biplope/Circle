{"ast":null,"code":"import{postDataApi}from'../../utils/fetchDataApi';import{ALERT_TYPES}from'./alertActions';import valid from'../../utils/valid';export const TYPES={AUTH:'AUTH'};export const login=data=>async dispatch=>{try{dispatch({type:ALERT_TYPES.ALERT,payload:{loading:true}});const res=await postDataApi('login',data);localStorage.setItem('login',true);dispatch({type:'AUTH',payload:{token:res.data.access_token,user:res.data.user}});dispatch({type:ALERT_TYPES.ALERT,payload:{success:res.data.msg}});}catch(error){dispatch({type:ALERT_TYPES.ALERT,payload:{error:error.response.data.msg}});}};export const refreshToken=()=>async dispatch=>{const login=localStorage.getItem('login');if(login){dispatch({type:'ALERT',payload:{loading:true}});try{const res=await postDataApi('refresh_token');dispatch({type:'AUTH',payload:{token:res.data.access_token,user:res.data.user}});dispatch({type:ALERT_TYPES.ALERT,payload:{success:res.data.msg}});}catch(error){console.log(error);dispatch({type:'ALERT',payload:{error:error.response.data.msg}});}}};export const register=data=>async dispatch=>{try{const check=valid(data);if(check.errLength>0){dispatch({type:'ALERT',payload:check.errMsg});}dispatch({type:\"ALERT\",payload:{loading:true}});const res=await postDataApi('register',data);console.log(res);dispatch({type:'AUTH',payload:{token:res.data.access_token,user:res.data.user}});localStorage.setItem('login',true);dispatch({type:ALERT_TYPES.ALERT,payload:{success:res.data.msg}});}catch(error){console.log(error);dispatch({type:\"ALERT\",payload:{error:error.res.data.msg}});}};export const logout=()=>async dispatch=>{try{localStorage.removeItem('login');await postDataApi('logout');window.location.href=\"/\";}catch(error){console.log(error);dispatch({type:\"ALERT\",payload:{error:error.res.data.msg}});}};","map":{"version":3,"names":["postDataApi","ALERT_TYPES","valid","TYPES","AUTH","login","data","dispatch","type","ALERT","payload","loading","res","localStorage","setItem","token","access_token","user","success","msg","error","response","refreshToken","getItem","console","log","register","check","errLength","errMsg","logout","removeItem","window","location","href"],"sources":["D:/MERN-Social-Media-Network-Using-React-Express-Nodejs-and-MongoDB-main/MERN-Social-Media-Network-Using-React-Express-Nodejs-and-MongoDB-main/frontside/src/redux/actions/authActions.js"],"sourcesContent":["\nimport {postDataApi} from '../../utils/fetchDataApi';\nimport {ALERT_TYPES} from './alertActions';\nimport valid from '../../utils/valid';\n\nexport const TYPES = {\n    AUTH : 'AUTH'\n}\n\nexport const login = (data) => async (dispatch) =>{\n    \n    try {\n        dispatch({\n            type:ALERT_TYPES.ALERT,\n            payload: {\n                loading:true,\n            }\n        })\n        const res = await postDataApi('login', data)\n        localStorage.setItem('login',true);\n        \n        dispatch({\n            type: 'AUTH',\n            payload:{\n                token:res.data.access_token,\n                user: res.data.user\n            } \n        })\n\n        \n\n        dispatch({\n            type:ALERT_TYPES.ALERT,\n            payload:{\n                success:res.data.msg\n            }\n        })\n    } catch (error) {\n        \n        dispatch({\n            type:ALERT_TYPES.ALERT,\n            payload:{\n                error:error.response.data.msg,\n            }\n        })\n    }\n}\n\nexport const refreshToken = () => async( dispatch) => {\n    const login = localStorage.getItem('login')\n    \n    if(login){\n    dispatch({\n        type:'ALERT',\n        payload:{\n            loading:true\n        }\n    })\n\n    try {\n        const res = await postDataApi('refresh_token');\n        dispatch({\n            type: 'AUTH',\n            payload:{\n                token:res.data.access_token,\n                user: res.data.user\n            } \n        })\n        dispatch({\n            type:ALERT_TYPES.ALERT,\n            payload:{\n                success:res.data.msg\n            }\n        })\n\n    } catch (error) {\n        console.log(error)\n        dispatch({\n            type:'ALERT',\n            payload:{\n                error:error.response.data.msg\n            }\n        })\n        \n    }\n}}\n\nexport const register = (data) =>async (dispatch) =>{\n    try {\n        const check = valid(data)\n        if(check.errLength > 0) {\n            dispatch({type: 'ALERT' , payload : check.errMsg})\n        }\n        dispatch({type:\"ALERT\",payload: {loading: true}})\n\n        const res =await  postDataApi('register', data)\n        \n        console.log(res)\n        dispatch({\n            type: 'AUTH',\n            payload:{\n                token:res.data.access_token,\n                user: res.data.user\n            } \n        })\n\n        \n        localStorage.setItem('login',true);\n        dispatch({\n            type:ALERT_TYPES.ALERT,\n            payload:{\n                success:res.data.msg\n            }\n        })\n\n    } catch (error) {\n        console.log(error)\n        dispatch({\n            type:\"ALERT\",\n            payload: {\n                error: error.res.data.msg\n            }\n        })\n    }\n}\n\nexport const logout = () => async (dispatch) =>{\n    try {\n        localStorage.removeItem('login');\n        await postDataApi('logout');\n        window.location.href=\"/\"\n        \n    } catch (error) {\n        console.log(error)\n        dispatch({\n            type:\"ALERT\",\n            payload: {\n                error: error.res.data.msg\n            }\n        })\n    }\n   \n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}